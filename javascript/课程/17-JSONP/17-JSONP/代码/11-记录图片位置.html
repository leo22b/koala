<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#box{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
			}
		</style>
		
		<script>
			window.onload = function(){
				var oBox = document.getElementById("box");
				var left = 0;
				var top = 0;
				
				
				// 获取cookie值，并设置oBox的位置
				if(document.cookie){
					oBox.style.left = getCookie('left') + 'px';
					oBox.style.top = getCookie('top') + 'px';
				}
				
				
				oBox.onmousedown = function(ev){
					ev = ev || event;
					var dowX = ev.offsetX;
					var dowY = ev.offsetY;
					
					document.onmousemove = function(ev){
						ev = ev || event;
						left = ev.clientX - dowX;
						top = ev.clientY - dowY;
						
						oBox.style.left = left + 'px';
						oBox.style.top = top + 'px';
					}
					
					document.onmouseup = function(){
						// 存储
						setCookie('left', left);
						setCookie('top', top);
						
						document.onmousemove = document.onmouseup = null;
					}
				}
				
				
				function setCookie(key, value, iDate){
					if(iDate){
						document.cookie = key + '=' + value + ';expires=' + iDate;	
					} else {
						document.cookie = key + '=' + value;
					}
				}
				
				function getCookie(key){
					// userName=liming; age=18
					var arr = document.cookie.split('; ');
					for(var i=0; i<arr.length; i++){
						// userName=liming
						var temp = arr[i].split('=');
						// 判断
						if(temp[0] == key){
							return temp[1];
						}
					}
				}
			}
		</script>
	</head>
	
	<body>
		<div id="box"></div>
	</body>
</html>
