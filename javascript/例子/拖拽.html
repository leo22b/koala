<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			body{
				background: black;
			}
			#box{
				width: 300px;
				height: 150px;
				border: 1px solid white;
				position: absolute;
				left: 30px;
				top: 30px;
				color: white;
			}
			#box h3{
				height: 30px;
				border-bottom: 1px solid white;
				line-height: 30px;
				text-align: right;
				cursor: move;
			}
			#box h3 a{
				font-size: 14px;
				color: white;
				text-decoration: none;
			}
			#box p{
				line-height: 30px;
			}
			#box p span{
				color: orange;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<h3><a href="#">点击回放拖动轨迹</a></h3>
			<p>Drag : <span>false</span></p>
			<p>offsetLeft : <span>30</span></p>
			<p>offsetTop : <span>30</span></p>
		</div>
		<script type="text/javascript">
			var obox=document.getElementById('box');
			var oh3=obox.getElementsByTagName('h3')[0];
			var oa=oh3.getElementsByTagName('a')[0];
			var ospan=obox.getElementsByTagName('span');
			var arr=[];
			
			oh3.onmousedown=function(ev){
				ev=event||ev;
				var lt=ev.offsetX;
				var tp=ev.offsetY;
				document.onmousemove=function(ev){
					ev=event||ev;
					var _lt=ev.clientX-lt;
					var _tp=ev.clientY-tp;
					obox.style.left=_lt+'px';
					obox.style.top=_tp+'px';
					
					ospan[0].innerHTML='true';
					ospan[1].innerHTML=_lt;
					ospan[2].innerHTML=_tp;
					
					arr.push({left:_lt,top:_tp});
				}
				document.onmouseup=function(){
					ospan[0].innerHTML='false';
					document.onmouseup=	document.onmousemove=null;
				}
				oa.onclick=function(){
					var index=arr.length-1;
					var time=setInterval(function(){
						obox.style.left=arr[index].left+'px';
						obox.style.top=arr[index].top+'px';
						
						ospan[1].innerHTML=arr[index].left;
						ospan[2].innerHTML=arr[index].top;
						index--;
						if(index<0){
							clearInterval(time);
						}
					},40);
				}
			}
		</script>
	</body>
</html>
