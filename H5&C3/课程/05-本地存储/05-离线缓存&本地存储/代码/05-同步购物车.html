<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#box{
				width: 300px;
				border: 1px solid gray;
				line-height: 30px;
			}
		</style>
		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
		<script type="text/javascript">
			$(function(){
				$('input[type=checkbox]').click(function(){
					// alert($(this).val());
					var onOff = $(this).prop('checked');
					window.localStorage.setItem('item', $(this).val() + ':' + onOff);
				});
				
				
				// storage事件
				$(window).bind('storage', function(ev){
					ev = ev || window.event;
					var item = window.localStorage.getItem('item').split(':')[0];
					var onOff = window.localStorage.getItem('item').split(':')[1];
					$('input[value=' + item + ']').prop('checked', function(){
//						console.log($(this).prop('checked'));
//						if($(this).prop('checked')){
//							$(this).prop('checked', false);
//						} else {
//							$(this).prop('checked', true);
//						}
						
						$(this).prop('checked', onOff=='true'?true:false);
					});
				});
			});
		</script>
	</head>
	
	<body>
		<div id="box">
			<input type="checkbox" value="iphone1" />iphone1 <br />
			<input type="checkbox" value="iphone2" />iphone2<br />
			<input type="checkbox" value="iphone3" />iphone3<br />
			<input type="checkbox" value="iphone4" />iphone4<br />
			<input type="checkbox" value="iphone5" />iphone5<br />
			<input type="checkbox" value="iphone6" />iphone6<br />
			<input type="checkbox" value="iphone7" />iphone7<br />
			<input type="checkbox" value="iphone8" />iphone8<br />
		</div>
		<input type="button" value="购买" />
	</body>
</html>
